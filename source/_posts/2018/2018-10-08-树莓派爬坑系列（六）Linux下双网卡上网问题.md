---
title: 树莓派爬坑系列（六）Linux下双网卡上网问题
date: 2018-10-08 22:38:10
categories: 树莓派爬坑系列
tags:
  - Linux
  - 双网卡
---
## 问题
树莓派的无线网卡连接了校园网（可访问互联网），有线网卡通过网线直接连接电脑。
电脑可以把网络共享给树莓派的有线网卡，也可以实现访问互联网。但当断开有线后树莓派不能访问互联网。

## 想要实现功能
电脑和树莓派通信时用用树莓派的有线网卡，树莓派访问互联网时用无线网卡。

## 缘由
使用`route`查看树莓派路由表如下：
![路由表](/images/route.png)
总共有4条路由，其中有两条默认路由，一个是有线网卡的，一个是无线网卡的。因为有线网卡的优先级比无线网卡高，
所以当访问互联网时走的是有线网卡的默认路由。

## 解决
删除有线网卡的默认路由，删除后默认路由即为走无线网卡。
```
route del default gw 192.168.1.1
```
其中`gw`为关键字 192.168.1.1为有线网卡网关

## 附
```
Route命令的正确用法使用
Route 命令行工具查看并编辑计算机的 IP 路由表。
Route 命令和语法如下所示：route [-f] [-p] [Command [Destination] [mask Netmask] [Gateway] [metric Metric]] [if Interface]]
-f 清除所有网关入口的路由表。
 -p 与 add 命令一起使用时使路由具有永久性。
```
常用命令：
```
route - p add 192.168.137.0 mask 255.255.255.0 192.168.137.1
```
意思为如果目的ip与mask相与等于192.168.137.0这个网段，则下一跳地址为192.168.137.1
`-p` 为永久添加
